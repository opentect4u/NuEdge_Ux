
<div class="card border-0 p-3">
<core-tab [Tab]="sub_tab"
[customClass]="'second_tab'"
(GetTabDtls)="TabDetails($event)"></core-tab>
  <core-report-filter
    (getsearchValues)="searchStpReport($event)"
    [title]="__title"
    [amcMst]="amc"
    [type]="stpType"
    [Reset]="reset_data"
    [state]= "state"
    (changeState)="changeState($event)"
    [sub_type]="sub_type"
    [report_type]="report_type"
    [sip_stp_swp_type_mst]="sip_stp_swp_type_mst"
    >
  </core-report-filter>


    <mat-card>
      <mat-card-header>
        <mat-card-title>
          <i class="fa fa-databse"></i>
          {{__title}} Reports
        </mat-card-title>
        <div class="my-auto marque__tag">
          <merque
          [type]="__title"
          [number]="mature_stp.length"
          [value]="total_mature_stp_amt"
          ></merque>
          </div>
        <div class="my-auto w-25 pr-4">
          <span class="ml-auto">
            <input id="search" class="form-control rounded" type="text"
                   (input)="filterGlobal($event)"
                   placeholder="Search" />
          </span>
        </div>
      </mat-card-header>
      <mat-card-content>
        <p-table
        #primeTbl
        id="trxDt"
        [scrollable]="true"
        [scrollHeight]="'370px'"
        [virtualScroll]="true"
        [virtualRowHeight]="33"
        [value]="mature_stp"
        [responsive]="true"
        [rowHover]="true"
        styleClass="p-datatable-striped"
        [autoLayout]="true"
        [scrollable]="true"
        appendTo="body"
        [columns]="column"
        [paginator]="true"
        [totalRecords]="mature_stp.length"
        [pageLinks]="3"
        [rowsPerPageOptions]="[10,50,100,{ showAll: 'All' }]"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [rows]="10"
        [showCurrentPageReport]="true"
        [tableStyle]="{ 'min-width': '397rem' }"
        >
          <ng-template pTemplate="header">
              <tr>
                  <th pResizableColumn *ngFor="let col of column" [pSortableColumn]="col.field"
                  [style.min-width]="col.width"
                  [style.max-width]="col.width"
                  >
                    {{ col.header }}
                    <p-sortIcon [field]="col.field">
                    </p-sortIcon>
                  </th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-trxn let-columns="columns"  let-i="rowIndex">
            <tr tabindex="999" [ngStyle]="{'height':'33px'}">
              <td *ngFor="let col of column"
              [style.min-width]="col.width"
              [style.max-width]="col.width"
              >
                <ng-container [ngSwitch]="true">
                  <ng-container *ngSwitchCase="col.field == 'sl_no'">
                    <p>{{i + 1}}</p>
                 </ng-container>
                 <ng-container *ngSwitchCase="col.field == 'from_date' || col.field == 'to_date' || col.field == 'reg_date'">
                    <p>{{ trxn[col.field] ? (trxn[col.field] | date:'dd-MM-YYYY') : 'N/A' }}</p>
                 </ng-container>
               <ng-container *ngSwitchCase="col.field == 'scheme_name'">
                <p class="m-0">{{ trxn[col.field] ? (trxn[col.field]  + '-' + trxn['plan_name'] + '-' + trxn['option_name']) : 'N/A' }}</p>
                 </ng-container>
                 <ng-container *ngSwitchCase="col.field == 'amount'">
                  <p [matTooltip]="trxn[col.field]">{{ trxn[col.field] ? trxn[col.field] : '0' }}</p>
               </ng-container>
               <ng-container *ngSwitchCase="col.field == 'stp_date' || col.field =='freq'">
                <p class="m-0" [matTooltip]="trxn[col.field]">{{ trxn[col.field] ? (trxn[col.field].toString() | titlecase) : 'N/A' }}</p>
                </ng-container>

                <ng-container *ngSwitchCase="col.field == 'sub_brk_cd'">
                  <p class="m-0">{{ (trxn[col.field] && (trxn[col.field] | titlecase)!="Not Provided" && trxn[col.field]!="BLANK" && trxn[col.field]!='0' && trxn[col.field]!= ' ') ? trxn[col.field] : 'N/A' }}</p>
                  </ng-container>
                  <ng-container *ngSwitchCase="col.field == 'first_client_name' || col.field == 'freq' || col.field == 'bank_name'">
                    <p class="m-0">{{ trxn[col.field] ? (trxn[col.field] | titlecase) : 'N/A' }}</p>
                    </ng-container>
                  <ng-container *ngSwitchDefault>
                    <p class="m-0" [matTooltip]="trxn[col.field]">{{ trxn[col.field] ? trxn[col.field] : 'N/A' }}</p>
                  </ng-container>
                </ng-container>
              </td>
              </tr>
            </ng-template>

          <ng-template pTemplate="emptymessage" let-columns>
            <tr>
              <td [attr.colSpan]="columns.length" class="noHistoryAvailable">
                 No Records Found
              </td>
            </tr>
          </ng-template>
          <!-- <ng-template pTemplate="footer">
            <tr >
              <td  *ngFor="let col of column"
              [attr.colspan]="col.field == 'sl_no' ? 5 : ''"
              [style.min-width]="col.field == 'sl_no' ? '40rem' : ''"
              [style.min-width]="col.field == 'sl_no' ? '40rem' : ''">
                <ng-container [ngSwitch]="true">
                  <ng-container *ngSwitchCase="col.field == 'sl_no'">
                   <p class="m-0 text-left">
                    STP (TOTAL: {{mature_stp.length}}) (Value: {{total_mature_stp_amt | number : '1.2-2'}})
                   </p>
                 </ng-container>
                  </ng-container>
              </td>
           </tr>
          </ng-template> -->
      </p-table>
     </mat-card-content>
    </mat-card>
</div>
