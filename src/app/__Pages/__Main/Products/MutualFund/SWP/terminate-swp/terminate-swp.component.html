
<core-report-filter
(getsearchValues)="searchSwpReport($event)"
[title]="__title"
[amcMst]="amc"
[clientMst]="client"
[trxnTypeMst]="trxnTypeMst"
></core-report-filter>


<mat-card>
  <mat-card-header>
    <mat-card-title>
      <i class="fa fa-databse"></i>
      {{__title}} Reports
    </mat-card-title>
    <div class="my-auto w-25 pr-4">
      <span class="ml-auto">
        <input id="search" class="form-control rounded" type="text"
               (input)="filterGlobal($event)"
               placeholder="Search" />
      </span>
    </div>
  </mat-card-header>
  <mat-card-content>
    <p-table
    #primeTbl
    id="trxDt"
    [value]="live_swp_rpt"
    [responsive]="true"
    [rowHover]="true"
    styleClass="p-datatable-striped"
    [autoLayout]="true"
    [scrollable]="true"
    appendTo="body"
    [columns]="column"
    [paginator]="true"
    [totalRecords]="live_swp_rpt.length"
    [pageLinks]="3"
    [rowsPerPageOptions]="[10,50,100,{ showAll: 'All' }]"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rows]="10"
    [showCurrentPageReport]="true"
    [tableStyle]="{ 'min-width': '350rem' }"
    >
      <ng-template pTemplate="header">
          <tr>
              <th *ngFor="let col of column" [pSortableColumn]="col.field"
              [style.min-width]="col.width"
              [style.max-width]="col.width"
              >
                {{ col.header }}
                <p-sortIcon [field]="col.field">
                </p-sortIcon>
              </th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-trxn let-columns="columns"  let-i="rowIndex">
        <tr tabindex="999">
          <td *ngFor="let col of column"
          [style.min-width]="col.width"
          [style.max-width]="col.width"
          >
            <ng-container [ngSwitch]="true">
              <ng-container *ngSwitchCase="col.field == 'sl_no'">
                <p class="m-0">{{i + 1}}</p>
             </ng-container>
             <ng-container *ngSwitchCase="col.field == 'start_date' || col.field == 'end_date' || col.field == 'reg_date' || col.field== 'terminated_date'">
                <p class="m-0">{{ trxn[col.field] ? (trxn[col.field] | date:'dd-MM-YYYY') : 'N/A' }}</p>
             </ng-container>
           <ng-container *ngSwitchCase="col.field == 'scheme_name'">
            <p class="m-0">{{ trxn[col.field] ? (trxn[col.field]  + '-' + trxn['plan_name'] + '-' + trxn['option_name']) : 'N/A' }}</p>
             </ng-container>
             <ng-container *ngSwitchCase="col.field == 'amount'">
              <p class="m-0" [matTooltip]="trxn[col.field]">{{ trxn[col.field] ? trxn[col.field] : '0' }}</p>
           </ng-container>
              <ng-container *ngSwitchDefault>
                <p class="m-0" [matTooltip]="trxn[col.field]">{{ trxn[col.field] ? trxn[col.field] : 'N/A' }}</p>
              </ng-container>
            </ng-container>
          </td>
          </tr>
        </ng-template>

      <ng-template pTemplate="emptymessage" let-columns>
        <tr>
          <td [attr.colSpan]="columns.length" class="noHistoryAvailable">
             No Records Found
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="footer">
        <tr >
          <td  *ngFor="let col of column"
          [attr.colspan]="col.field == 'sl_no' ? 5 : ''"
          [style.min-width]="col.field == 'sl_no' ? '40rem' : ''"
          [style.min-width]="col.field == 'sl_no' ? '40rem' : ''">
            <ng-container [ngSwitch]="true">
              <ng-container *ngSwitchCase="col.field == 'sl_no'">
               <p class="m-0 text-left">
                SWP (TOTAL: {{live_swp_rpt.length}}) (Value: {{total_terminate_swp_amt | number : '1.2-2'}})
               </p>
             </ng-container>
              </ng-container>
          </td>
       </tr>
      </ng-template>
  </p-table>
  </mat-card-content></mat-card>
