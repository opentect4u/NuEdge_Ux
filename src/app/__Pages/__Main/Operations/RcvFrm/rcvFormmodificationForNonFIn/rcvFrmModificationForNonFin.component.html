<div cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
  <div mat-dialog-title class="dialog-title">
    <h2 [title]="data.title">{{data.title}}</h2>
    <div class="btnIcon">
      <button mat-icon-button title="Minimize" (click)="minimize()" >
        <mat-icon >remove</mat-icon>
      </button>
      <button mat-icon-button title="Restore Down" (click)="maximize()" *ngIf="__isVisible">
        <mat-icon>content_copy</mat-icon>
      </button>
      <button mat-icon-button title="Maximize" (click)="fullScreen()" *ngIf="!__isVisible">
        <mat-icon>check_box_outline_blank </mat-icon>
      </button>

      <button mat-icon-button title="Close" [mat-dialog-close]="">
        <mat-icon >close</mat-icon>
      </button>
    </div>
  </div>
  <mat-dialog-content>
    <form [formGroup]="__rcvFormForNonFin" (ngSubmit)="recieveForm()" [attr.id]="data.title + data.id" ngNativeValidate
      autocomplete="off">
      <div class="row">
        <div class="col-sm-12 my-4">
          <label for="bu_type">Buisness Type <span class="text-danger">*</span></label>
          <select name="bu_type" id="bu_type" formControlName="bu_type" class="form-control">
            <option value=""> Select Buisness Type</option>
            <option *ngFor="let __bu_type of __buisness_type" value="{{__bu_type.id}}">{{__bu_type.bu_type}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__rcvFormForNonFin.get('bu_type').invalid && (__rcvFormForNonFin.get('bu_type').dirty || __rcvFormForNonFin.get('bu_type').touched)">
            <span class="invalid-feedback" *ngIf="(__rcvFormForNonFin.get('bu_type')).errors?.required">*Please provide
              buisness
              type</span>
          </div>
        </div>
        <ng-container *ngIf="__rcvFormForNonFin.get('bu_type').value == 'B'">
          <div class="col-sm-12 my-4">
            <!-- //ARN -->
            <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforSubBrkArn($event)">
              <div class="searchDiv">
                <label for="subbrkArn">Sub Broker ARN<span class="text-danger">*</span></label>
                <input type="search" id="subbrkArn" class="form-control" placeholder="Serach By Sub Broker ARN"
                  formControlName="sub_arn_no">
                <span class="spinner-border"
                  *ngIf="__issubBrkArnVisible && __rcvFormForNonFin.get('sub_arn_no').value.length > 1"></span>

                <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforSubBrkArn($event)">
                  <div class="serachresult_client" #subBrkArnFornonFin>
                    <ul *ngIf="__subbrkArnMst.length > 0">
                      <li *ngFor="let items of __subbrkArnMst" (click)="getItems(items,'S')">
                        {{items.arn_no}} | {{items.bro_name}}
                      </li>
                    </ul>
                    <div class="noDataFound" *ngIf="__subbrkArnMst.length == 0">
                      <h5 class="text-center">
                        Sorry!! No Sub-Brokers Found
                      </h5>
                      <p>If your result match,they will appear here</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-12 my-4">
            <label for="subbrkCD">Sub Broker Code<span class="text-danger">*</span></label>
            <input type="search" id="subbrkCD" class="form-control" placeholder="Sub Broker Code"
              formControlName="sub_brk_cd" readonly>
          </div>
        </ng-container>

        <div class="col-sm-12 my-4" *ngIf="__rcvFormForNonFin.get('bu_type').value != ''">
          <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClick($event)">
            <div class="searchDiv">
              <label for="Euin">EUIN<span class="text-danger">*</span></label>
              <input type="search" id="Euin" class="form-control" placeholder="Serach By EUIN Number"
                formControlName="euin_no">
              <span class="spinner-border"
                *ngIf="__isEuinNumberVisible && __rcvFormForNonFin.get('euin_no').value.length > 1"></span>

              <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClick($event)">
                <div class="serachresult_client" #searchResultforEuin>
                  <ul *ngIf="__euinMst.length > 0">
                    <li *ngFor="let items of __euinMst" (click)="getItems(items,'E')">
                      {{items.euin_no}} | {{items.emp_name}}
                    </li>
                  </ul>
                  <div class="noDataFound" *ngIf="__euinMst.length == 0">
                    <h5 class="text-center">
                      Sorry!! No EUIN Numbers Found
                    </h5>
                    <p>If your result match,they will appear here</p>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <div class="invalid-feedback"
            *ngIf="__rcvFormForNonFin.get('euin_no').invalid && (__rcvFormForNonFin.get('euin_no').dirty || __rcvFormForNonFin.get('euin_no').touched)">
            <span class="invalid-feedback" *ngIf="(__rcvFormForNonFin.get('euin_no')).errors?.required">*Please provide
              EUIN number</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="my-4" [ngClass]="{'col-sm-12':!__isCldtlsEmpty,'col-sm-10':__isCldtlsEmpty}">
          <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforClient($event)">
            <div class="searchDiv">
              <label for="__clntCd">Client Code <span class="text-danger">*</span></label>
              <!-- <p class="text-danger" *ngIf="__clientMst.length == 0 && __rcvFormForNonFin.get('client_code').value">Client does not exists</p> -->
              <input type="search" name="__clntCd" id="__clntCd" class="form-control" formControlName="client_code"
                placeholder="Search By Client Name,Client Code, Email, Mobile, Pan & DOB">
              <span class="spinner-border"
                *ngIf="__isclientVisible && __rcvFormForNonFin.get('client_code').value.length > 1"></span>

              <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforClient($event)">
                <div class="serachresult_client" #clientCdFornonFin>
                  <ul *ngIf="__clientMst.length > 0">
                    <li *ngFor="let items of __clientMst" (click)="getItems(items,'C')">
                      {{items.client_code}} | {{items.pan}} | {{items.client_name}}
                    </li>
                  </ul>
                  <div class="noDataFound" *ngIf="__clientMst.length == 0">
                    <h5 class="text-center">
                      Sorry!! No Records Found
                    </h5>
                    <p>To create a new client .Please click on Create Client</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-2 clientCode" *ngIf="__isCldtlsEmpty && __rcvFormForNonFin.get('client_code').value">
          <button color="primary" type="button" mat-button [matMenuTriggerFor]="menu">
            <mat-icon>add</mat-icon> Create Client
          </button>
          <mat-menu #menu="matMenu">
            <div class="row p-0 m-0">
              <div title="{{clOption.name}}" class="col-sm-4 d-flex justify-content-center headerMenu"
                *ngFor="let clOption of __mcOptionMenu" (click)="navigateTo(clOption)">
                <mat-icon>{{clOption.icon}}</mat-icon>
              </div>
            </div>
          </mat-menu>
        </div>
      </div>

      <div class="row">
        <div class="my-4" [ngClass]="{'col-sm-12': !__dialogDtForClient,'col-sm-10':__dialogDtForClient}"
          *ngIf="__rcvFormForNonFin.get('client_code').value && __rcvFormForNonFin.get('client_name').value">
          <label for="__clName">Client Name</label>
          <input type="search" name="__clName" id="__clName" class="form-control" placeholder="Client Name"
            formControlName="client_name" [attr.disabled]="true">
        </div>
        <div class="col-sm-2 clientCode"
          *ngIf="__dialogDtForClient && __rcvFormForNonFin.get('client_code').value && __rcvFormForNonFin.get('client_name').value">
          <button (click)="openDialog('C')" color="primary" *ngIf="this.__dialogDtForClient" mat-button type="button"
            aria-label="Example icon button with a eye icon" title="View Client Details">
            <mat-icon>remove_red_eye</mat-icon>
            View Details
          </button>
        </div>

      </div>
      <div class="row">
        <div class="col-sm-12 my-4">
          <label for="FrmType">Transaction<span class="text-danger">*</span></label>
          <select name="frmType" class="form-control" id="FrmType" formControlName="trans_id">
            <option value="">Select Transaction</option>
            <option *ngFor="let __formType of __transType" value="{{__formType.id}}">
              {{__formType.trns_name}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__rcvFormForNonFin.get('trans_id').invalid && (__rcvFormForNonFin.get('trans_id').dirty || __rcvFormForNonFin.get('trans_id').touched)">
            <span class="invalid-feedback" *ngIf="(__rcvFormForNonFin.get('trans_id')).errors?.required">*Please provide
              form
              type</span>
          </div>
        </div>

      </div>
      <ng-container *ngIf="__rcvFormForNonFin.get('trans_id').value != '12'
           && __rcvFormForNonFin.get('trans_id').value != '13'">
        <div class="row">
          <div class="col-sm-12 my-4">
            <label for="folio_no">Folio Number <span class="text-danger">*</span></label>
            <input type="text" placeholder="Enter Folio Number" name="folio_number" id="folio_no" class="form-control"
              formControlName="folio_number">
            <div class="invalid-feedback"
              *ngIf="__rcvFormForNonFin.get('folio_number').invalid && (__rcvFormForNonFin.get('folio_number').dirty || __rcvFormForNonFin.get('folio_number').touched)">
              <span class="invalid-feedback" *ngIf="(__rcvFormForNonFin.get('folio_number')).errors?.required">*Please
                provide folio number</span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="my-4" [ngClass]="{'col-sm-12': !__dialogDtForScheme,'col-sm-10':__dialogDtForScheme}">
            <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforScheme($event)">
              <div class="searchDiv">
                <label for="schemeName">Scheme Name
                  <span class="text-danger">*</span></label>
                <input type="search" id="schemeName" class="form-control" placeholder="Search By Scheme Name"
                  formControlName="scheme_name">
                <span class="spinner-border"
                  *ngIf="__isschemeVisible && __rcvFormForNonFin.get('scheme_name').value.length > 1"></span>

                <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforScheme($event)">
                  <div class="serachresult_client" #schemeResForNonFin>
                    <ul *ngIf="__schemeMst.length > 0">
                      <li *ngFor="let items of __schemeMst" (click)="getItems(items,'SC')">
                        {{items.scheme_name}}
                      </li>
                    </ul>

                    <div class="noDataFound" *ngIf="__schemeMst.length == 0">
                      <h5 class="text-center">
                        Sorry!! No Schemes Results Found
                      </h5>
                      <p>If your result match,they will appear here</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-2 clientCode" *ngIf="__dialogDtForScheme">
            <button color="primary" *ngIf="this.__dialogDtForScheme" (click)="openDialog('S')" mat-button type="button"
              aria-label="Example icon button with a eye icon" title="View Scheme Details">
              <mat-icon>remove_red_eye</mat-icon>
              View Details
            </button>
          </div>
        </div>
      </ng-container>

      <!-- KYC Modification Type -->
      <ng-container *ngIf="__rcvFormForNonFin.get('trans_id').value == '12'">
        <div class="row">
          <div class="col-sm-12 my-4">
            <label for="kyc_modification">Kyc Modification Type <span class="text-danger">*</span></label>
            <select class="form-control" formControlName="kyc_modification" name="kyc_modification"
              id="kyc_modification">
              <option value="">Select</option>
              <option [value]="modify_type.id" *ngFor="let modify_type of __kycModification">
                {{modify_type.name}}</option>
            </select>

            <div class="invalid-feedback"
              *ngIf="__rcvFormForNonFin.get('kyc_modification').invalid && (__rcvFormForNonFin.get('kyc_modification').dirty || __rcvFormForNonFin.get('kyc_modification').touched)">
              <span class="invalid-feedback"
                *ngIf="(__rcvFormForNonFin.get('kyc_modification')).errors?.required">*Please provide kyc modification
                type</span>
            </div>
          </div>
        </div>
      </ng-container>


      <!-- KYC Fresh -->
      <ng-container *ngIf="__rcvFormForNonFin.get('trans_id').value == '13'">
        <div class="row">
          <div class="col-sm-12 my-4">
            <label for="existing_kyc_status">Existing Kyc Status <span class="text-danger">*</span></label>
            <select class="form-control" formControlName="existing_kyc_status" name="existing_kyc_status"
              id="existing_kyc_status">
              <option value="">Select</option>
              <option [value]="kyc_fresh.id" *ngFor="let kyc_fresh of __kycFresh">{{kyc_fresh.name}}</option>
            </select>
            <div class="invalid-feedback"
              *ngIf="__rcvFormForNonFin.get('existing_kyc_status').invalid && (__rcvFormForNonFin.get('existing_kyc_status').dirty || __rcvFormForNonFin.get('existing_kyc_status').touched)">
              <span class="invalid-feedback"
                *ngIf="(__rcvFormForNonFin.get('existing_kyc_status')).errors?.required">*Please provide kyc
                fresh</span>
            </div>
          </div>
        </div>
      </ng-container>

      <div class="row">
        <div class="col-sm-12 my-3">
          <label for="recv_from">Receive From <span class="text-danger">*</span></label>
          <input type="text" name="recv_from" placeholder="Enter Receive From" id="recv_from" class="form-control"
            formControlName="recv_from">
        </div>
      </div>


    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end" class="popupBoxSubmitSec">
    <button class="btn addBtn" [attr.form]="data.title  + data.id"
      [disabled]="this.__rcvFormForNonFin.invalid">Submit</button>
  </mat-dialog-actions>
  <br clear="all">
</div>
