
<div  cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle >
  <div mat-dialog-title class="dialog-title" >
    <h2 [title]="data.title">{{data.title}}</h2>
    <div class="btnIcon">
      <button mat-icon-button title="Minimize" (click)="minimize()" >
        <mat-icon >remove</mat-icon>
      </button>
      <button mat-icon-button title="Restore Down" (click)="maximize()" *ngIf="__isVisible">
        <mat-icon>content_copy</mat-icon>
      </button>
      <button mat-icon-button title="Maximize" (click)="fullScreen()" *ngIf="!__isVisible">
        <mat-icon>check_box_outline_blank </mat-icon>
      </button>

      <button mat-icon-button title="Close" [mat-dialog-close]="">
        <mat-icon >close</mat-icon>
      </button>

    </div>

  </div>
  <mat-dialog-content>
    <form [formGroup]="__rcvForm" autocomplete="off" [attr.id]="'__rcvForm_INS' + data.temp_tin_no" (ngSubmit)="recieveForm()">
      <div class="row mt-3">
        <div class="col-sm-12">
          <label class="form-label">Buisness Type <span class="text-danger">*</span></label>
          <select class="form-control" formControlName="bu_type">
            <option value="">Select</option>
            <option [value]="buisness.id" *ngFor="let buisness of __bu_type">{{buisness.bu_type}}</option>
          </select>
          <div class="invalid-feedback"
                *ngIf="__rcvForm.get('bu_type').invalid && (__rcvForm.get('bu_type').dirty || __rcvForm.get('bu_type').touched)">
                <span class="invalid-feedback" *ngIf="(__rcvForm.get('bu_type')).errors?.required">*Please provide buisness
                  type</span>
          </div>
        </div>
      </div>

        <!-- Sub Broker Code / ARN -->
        <ng-container *ngIf="__rcvForm.value.bu_type == 'B'">

          <div class="row my-5">
            <div class="col-sm-12">
              <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforSubBrkArn($event)">
                <div class="searchDiv">
                  <label for="subbrkArn">
                    <mat-icon
                  class="errorIcon"
                  #tooltip="matTooltip"
                  matTooltip="Sub Broker does not exists"
                  *ngIf="__rcvForm.get('sub_arn_no').errors?.empExists">
                  error</mat-icon>&nbsp;
                    Sub Broker Code<span class="text-danger">*</span></label>
                  <input type="search" id="subbrkArn" class="form-control" placeholder="Serach By Sub Broker Code" formControlName="sub_arn_no">
                  <span class="spinner-border" *ngIf="__isSubArnPending && __rcvForm.get('sub_arn_no').value?.length > 1"></span>

                  <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforSubBrkArn($event)">
                    <div class="serachresult_client" #subBrkArn>
                      <ul *ngIf="__subbrkArnMst.length > 0">
                        <li *ngFor="let items of __subbrkArnMst" (click)="getItems(items,'S')">
                         {{items.arn_no}} | {{items.bro_name}}
                        </li>
                      </ul>
                      <div class="noDataFound" *ngIf="__subbrkArnMst.length == 0">
                        <h5 class="text-center">
                          Sorry!! No Sub-Brokers Found
                        </h5>
                        <p>If your result match,they will appear here</p>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="row">
            <div class="col-sm-12">
              <label class="form-label">Sub Broker Code <span class="text-danger">*</span></label>
              <input type="text" placeholder="Sub Broker Code" [attr.disabled]="true" class="form-control" formControlName="sub_brk_cd">
            </div>
          </div> -->

      </ng-container>
       <!-- EUIN -->
       <ng-container *ngIf="__rcvForm.value.bu_type !=''">
        <div [class]="'row my-5'">
          <div class="col-sm-12">
            <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClick($event)">
              <div class="searchDiv">
                <label for="Euin">
                  <mat-icon
                  class="errorIcon"
                  #tooltip="matTooltip"
                  matTooltip="Employee does not exists"
                  *ngIf="__rcvForm.get('euin_no').errors?.empExists">
                  error</mat-icon> &nbsp;Employee Details<span class="text-danger"> *</span></label>
                <input type="search" id="Euin"
                class="form-control"
                placeholder="Serach By Employee Details"
                formControlName="euin_no">
                <span class="spinner-border" *ngIf="__isEuinPending && __rcvForm.get('euin_no').value?.length > 1"></span>

                <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClick($event)">
                  <div class="serachresult_client" #searchEUIN>
                    <ul *ngIf="__euinMst.length > 0">
                      <li *ngFor="let items of __euinMst" (click)="getItems(items,'E')">
                       {{items.euin_no}} | {{items.emp_name}}
                      </li>
                    </ul>
                    <div class="noDataFound" *ngIf="__euinMst.length == 0">
                      <h5 class="text-center">
                        Sorry!! No Employees Found
                      </h5>
                      <p>If your result match,they will appear here</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <div [class]="__rcvForm.value.bu_type =='' ? 'row my-5' : 'row'">
        <div class="col-sm-12">
          <label class="form-label">Insure Buisness Type <span class="text-danger"> * </span></label>
          <select class="form-control" formControlName="insure_bu_type">
            <option value="">Select</option>
            <option value="F">Fresh</option>
            <option value="R">Renewal</option>
          </select>
          <div class="invalid-feedback"
        *ngIf="__rcvForm.get('insure_bu_type').invalid && (__rcvForm.get('insure_bu_type').dirty || __rcvForm.get('insure_bu_type').touched)">
        <span class="invalid-feedback" *ngIf="(__rcvForm.get('insure_bu_type')).errors?.required">*Please provide insure buisness type</span>
        </div>
        </div>
      </div>
      <div [class]="__rcvForm.value.bu_type =='' ? 'row' : 'row my-5'">
        <div class="col-sm-12">
          <label class="form-label">Type Of Insurance <span class="text-danger"> * </span></label>
          <select class="form-control" formControlName="ins_type_id">
            <option value="">Select</option>
            <option [value]="insType.id" *ngFor="let insType of __insTypeMst">{{insType.type}}</option>
          </select>
          <div class="invalid-feedback"
                *ngIf="__rcvForm.get('ins_type_id').invalid && (__rcvForm.get('ins_type_id').dirty || __rcvForm.get('ins_type_id').touched)">
                <span class="invalid-feedback" *ngIf="(__rcvForm.get('ins_type_id')).errors?.required">*Please provide insurance
                  type</span>
          </div>
        </div>
      </div>

      <div [class]="__rcvForm.value.bu_type =='' ? 'row my-5' : 'row'">
        <div [ngClass]="{'col-sm-12':!__isCldtlsEmpty,'col-sm-8':__isCldtlsEmpty}">
          <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforClient($event)">
            <div class="searchDiv">
              <label for="__clntCd">
                <mat-icon
                  class="errorIcon"
                  #tooltip="matTooltip"
                  matTooltip="Proposer does not exists"
                  *ngIf="__rcvForm.get('proposer_code').errors?.proposerExists">
                  error</mat-icon>&nbsp;
                Proposer Details
                <span class="text-danger">*</span></label>
              <input type="search"
              name="__clntCd"
              id="__clntCd"
              class="form-control"
              formControlName="proposer_code"
              placeholder="Search By Proposer Name,Proposer Code, Email, Mobile, Pan & DOB">
              <span class="spinner-border" *ngIf="__isClientPending && __rcvForm.get('proposer_code').value?.length > 1"></span>

              <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforClient($event)">
                <div class="serachresult_client" #clientCd>
                  <ul *ngIf="__clientMst.length > 0">
                    <li *ngFor="let items of __clientMst" (click)="getItems(items,'C')">
                     {{items.client_code}} | {{items.pan}} | {{items.client_name}}
                    </li>
                  </ul>
                  <div class="noDataFound" *ngIf="__clientMst.length == 0">
                    <h5 class="text-center">
                      Sorry!! No Records Found
                    </h5>
                    <p>To create a new proposer .Please click on Create Proposer</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-4 clientCode" *ngIf="__isCldtlsEmpty && __rcvForm.get('proposer_code').value" >
          <button
          color="primary" type="button" mat-button [matMenuTriggerFor]="menu">
          <mat-icon>add</mat-icon> Create Proposer
         </button>
         <mat-menu #menu="matMenu">
          <div class="row p-0 m-0">
            <div title="{{clOption.name}}" class="col-sm-6 d-flex justify-content-center headerMenu" *ngFor="let clOption of __mcOptionMenu" (click)="navigateTo(clOption)">
              <mat-icon>{{clOption.icon}}</mat-icon>
            </div>
          </div>
        </mat-menu>
        </div>
      </div>


      <div class="row my-3">
        <div class="my-3" [ngClass]="{'col-sm-12': !__dialogDtForClient,'col-sm-8':__dialogDtForClient}" *ngIf="__rcvForm.get('proposer_code').value && __rcvForm.get('proposer_name').value">
          <label for="__clName">Proposer Name</label>
              <input type="search" name="__clName" id="__clName" class="form-control" placeholder="Proposer Name" formControlName="proposer_name" [attr.disabled]="true">
        </div>
        <div class="col-sm-4 clientCode" *ngIf="__dialogDtForClient && __rcvForm.get('proposer_code').value && __rcvForm.get('proposer_name').value">
          <button (click)="openDialog('C')" color="primary" *ngIf="this.__dialogDtForClient"   mat-button type="button"  aria-label="Example icon button with a eye icon" title="View Proposer Details">
            <mat-icon>remove_red_eye</mat-icon>
            View Details
          </button>
        </div>

      </div>

      <div [class]="__rcvForm.value.bu_type =='' ? 'row mb-2' : 'row my-5'">
        <div class="col-sm-12">
          <label class="form-label">Receive From</label>
          <input type="text" placeholder="Enter Receieve From" class="form-control" formControlName="recv_from">
          <!-- <div class="invalid-feedback"
          *ngIf="__rcvForm.get('recv_from').invalid && (__rcvForm.get('recv_from').dirty || __rcvForm.get('recv_from').touched)">
          <span class="invalid-feedback" *ngIf="(__rcvForm.get('recv_from')).errors?.required">*Please provide receive from</span>
    </div> -->
        </div>
      </div>


    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end" class="popupBoxSubmitSec">
    <button class="btn addBtn"   [attr.form]="'__rcvForm_INS' + data.temp_tin_no" [disabled]="this.__rcvForm.invalid">Submit</button>
  </mat-dialog-actions>
  <br clear="all">
</div>
