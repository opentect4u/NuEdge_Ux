<div cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
  <div mat-dialog-title class="dialog-title">
    <h2 [title]="data.title">{{data.title}}</h2>
    <div class="btnIcon">
      <button mat-icon-button title="Minimize" (click)="minimize()">
        <mat-icon>remove</mat-icon>
      </button>
      <button mat-icon-button title="Restore Down" (click)="maximize()" *ngIf="__isVisible">
        <mat-icon>content_copy</mat-icon>
      </button>
      <button mat-icon-button title="Maximize" (click)="fullScreen()" *ngIf="!__isVisible">
        <mat-icon>check_box_outline_blank </mat-icon>
      </button>

      <button mat-icon-button title="Close" [mat-dialog-close]="">
        <mat-icon>close</mat-icon>
      </button>

    </div>

  </div>
  <mat-dialog-content>
    <form autocomplete="off" [attr.id]="'__TRAX_INS' + data.tin_no" [formGroup]="__insTrax"
      (ngSubmit)="InsuranceTrax()">
      <div class="row mt-3">
        <div class="col-sm-12">
          <mat-radio-group aria-label="Select an option" color="primary" formControlName="tin_status">
            <mat-radio-button value="Y">With TTIN</mat-radio-button>
            <mat-radio-button value="N" class="ml-5">Without TTIN</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>
      <ng-container *ngIf="__insTrax.value.tin_status == 'Y'">
        <div [class]="__insTrax.value.tin_status == 'Y' ? 'row my-5' : 'row'">
          <div class="col-sm-12">
            <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickfortempTin($event)">
              <div class="searchDiv">
                <label for="__temp_tin_no">
                  Temporary TIN Number
                  <span class="text-danger">*</span>
                </label>
                <input type="search" name="__temp_tin_no" id="__temp_tin_no" class="form-control"
                  formControlName="temp_tin_no" placeholder="Search by Temporary TIN Number">
                <span class="spinner-border"
                  *ngIf="__istemporaryspinner && __insTrax.get('temp_tin_no').value?.length > 1"></span>
                <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickfortempTin($event)">
                  <div class="serachresult_client" #searchTempTin>
                    <ul *ngIf="__temp_tinMst.length > 0">
                      <li *ngFor="let items of __temp_tinMst" (click)="getItems(items,'T')">
                        {{items.temp_tin_no}} | {{items.proposer_name}} | {{items.ins_type_name}}
                      </li>
                    </ul>
                    <div class="noDataFound" *ngIf="__temp_tinMst.length == 0">
                      <h5 class="text-center">
                        Sorry!! No Records Found
                      </h5>
                      <p>Temporary TIN Number Not Available</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <div [class]="__insTrax.get('tin_status').value == 'N' ? 'row my-5' : 'row'">
        <div class="col-sm-12">
          <label for="bu_type">Buisness Type <span class="text-danger">*</span></label>
          <select class="form-control" formControlName="bu_type">
            <option value="">Select</option>
            <option [value]="buType.id" *ngFor="let buType of __bu_type">{{buType.bu_type}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('bu_type').invalid && (__insTrax.get('bu_type').dirty || __insTrax.get('bu_type').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('bu_type')).errors?.required">*Please provide
              buisness
              type</span>
          </div>
        </div>
      </div>
      <!-- For Sub Broker -->
      <ng-container *ngIf="__insTrax.get('bu_type').value == 'B'">
        <div class="row my-5">
          <div class="col-sm-12">
            <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforSubBrkArn($event)">
              <div class="searchDiv">
                <label for="subbrkArn">
                  <mat-icon
                  class="errorIcon"
                  #tooltip="matTooltip"
                  matTooltip="Sub Broker does not exists"
                  *ngIf="__insTrax.get('sub_arn_no').errors?.subBrkExists">
                  error</mat-icon>
                  Sub Broker Code<span class="text-danger">*</span></label>
                <input type="search" id="subbrkArn" class="form-control" placeholder="Serach By Sub Broker Code"
                  formControlName="sub_arn_no">
                <span class="spinner-border"
                  *ngIf="__isSubArnPending && __insTrax.get('sub_arn_no').value?.length > 1"></span>

                <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforSubBrkArn($event)">
                  <div class="serachresult_client" #subBrkArn>
                    <ul *ngIf="__subbrkArnMst.length > 0">
                      <li *ngFor="let items of __subbrkArnMst" (click)="getItems(items,'S')">
                        {{items.arn_no}} | {{items.bro_name}}
                      </li>
                    </ul>
                    <div class="noDataFound" *ngIf="__subbrkArnMst.length == 0">
                      <h5 class="text-center">
                        Sorry!! No Sub Brokers Found
                      </h5>
                      <p>If your result match,they will appear here</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="row">
          <div class="col-sm-12">
            <label class="form-label">Sub Broker Code <span class="text-danger">*</span></label>
            <input type="text" placeholder="Sub Broker Code" [attr.disabled]="true" class="form-control"
              formControlName="sub_brk_cd">
          </div>
        </div> -->
      </ng-container>
      <!-- For EUIN -->
      <ng-container *ngIf="__insTrax.get('bu_type').value != ''">
        <div class="row my-5">
          <div class="col-sm-12">
            <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClick($event)">
              <div class="searchDiv">
                <label for="Euin">
                  <mat-icon
                  class="errorIcon"
                  #tooltip="matTooltip"
                  matTooltip="Employee does not exists"
                  *ngIf="__insTrax.get('euin_no').errors?.empExists">
                  error</mat-icon>
                  Employee Details<span class="text-danger">*</span></label>
                <input type="search" id="Euin" class="form-control" placeholder="Serach By Employee Details"
                  formControlName="euin_no">
                <span class="spinner-border"
                  *ngIf="__isEuinPending && __insTrax.get('euin_no').value?.length > 1"></span>

                <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClick($event)">
                  <div class="serachresult_client" #searchEUIN>
                    <ul *ngIf="__euinMst.length > 0">
                      <li *ngFor="let items of __euinMst" (click)="getItems(items,'E')">
                        {{items.euin_no}} | {{items.emp_name}}
                      </li>
                    </ul>
                    <div class="noDataFound" *ngIf="__euinMst.length == 0">
                      <h5 class="text-center">
                        Sorry!! No Employee Details Found
                      </h5>
                      <p>If your result match,they will appear here</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <div [class]="__insTrax.get('bu_type').value != '' ? 'row' : 'row my-5'">
        <div class="col-sm-12">
          <label for="insure_bu_type">Insure Buisness Type <span class="text-danger">*</span></label>
          <select class="form-control" formControlName="insure_bu_type">
            <option value="">Select</option>
            <option value="F">Fresh</option>
            <option value="R">Renewal</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('insure_bu_type').invalid && (__insTrax.get('insure_bu_type').dirty || __insTrax.get('insure_bu_type').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('insure_bu_type')).errors?.required">*Please provide
              insure buisness
              type</span>
          </div>
        </div>
      </div>
      <div class="row my-5">
        <div class="col-sm-12">
          <label class="form-label">Type Of Insurance <span class="text-danger">*</span></label>
          <select class="form-control" formControlName="ins_type_id">
            <option value="">Select</option>
            <option [value]="insType.id" *ngFor="let insType of __insTypeMst">{{insType.type}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('ins_type_id').invalid && (__insTrax.get('ins_type_id').dirty || __insTrax.get('ins_type_id').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('ins_type_id')).errors?.required">*Please provide
              insurance
              type</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div [ngClass]="{'col-sm-12':!__isCldtlsEmpty,'col-sm-8':__isCldtlsEmpty}">
          <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforClient($event)">
            <div class="searchDiv">
              <label for="__clntCd">
                <mat-icon
                  class="errorIcon"
                  #tooltip="matTooltip"
                  matTooltip="Proposer does not exists"
                  *ngIf="__insTrax.get('proposer_code').errors?.ClientExists">
                  error</mat-icon>
                Proposer Details
                <span class="text-danger">*</span></label>
              <input type="search" name="__clntCd" id="__clntCd" class="form-control" formControlName="proposer_code"
                placeholder="Search By Proposer Name,Proposer Code, Email, Mobile, Pan & DOB">
              <span class="spinner-border"
                *ngIf="__isClientPending && __insTrax.get('proposer_code').value?.length > 1"></span>

              <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforClient($event)">
                <div class="serachresult_client" #clientCd>
                  <ul *ngIf="__clientMst.length > 0">
                    <li *ngFor="let items of __clientMst" (click)="getItems(items,'C')">
                      {{items.client_code}} | {{items.pan}} | {{items.client_name}}
                    </li>
                  </ul>
                  <div class="noDataFound" *ngIf="__clientMst.length == 0">
                    <h5 class="text-center">
                      Sorry!! No Records Found
                    </h5>
                    <p>To create a new proposer .Please click on Create Proposer</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-4 clientCode" *ngIf="__isCldtlsEmpty && __insTrax.get('proposer_code').value">
          <button color="primary" type="button" mat-button [matMenuTriggerFor]="menu">
            <mat-icon>add</mat-icon> Create Proposer
          </button>
          <mat-menu #menu="matMenu">
            <div class="row p-0 m-0">
              <div title="{{clOption.name}}" class="col-sm-4 d-flex justify-content-center headerMenu"
                *ngFor="let clOption of __mcOptionMenu" (click)="navigateTo(clOption)">
                <mat-icon>{{clOption.icon}}</mat-icon>
              </div>
            </div>
          </mat-menu>
        </div>
      </div>
      <ng-container *ngIf="__insTrax.get('proposer_code').value && __insTrax.get('proposer_name').value">
        <div class="row my-5">
          <div class="my-3" [ngClass]="{'col-sm-12': !__dialogDtForClient,'col-sm-8':__dialogDtForClient}">
            <label for="__clName">Proposer Name</label>
            <input type="search" name="__clName" id="__clName" class="form-control" placeholder="Proposer Name"
              formControlName="proposer_name" [attr.disabled]="true">
          </div>
          <div class="col-sm-4 clientCode"
            *ngIf="__dialogDtForClient && __insTrax.get('proposer_code').value && __insTrax.get('proposer_name').value">
            <button (click)="openDialog('C')" color="primary" *ngIf="this.__dialogDtForClient" mat-button type="button"
              aria-label="Example icon button with a eye icon" title="View Proposer Details">
              <mat-icon>remove_red_eye</mat-icon>
              View Details
            </button>
          </div>

        </div>
      </ng-container>

      <div class="row my-5">
        <div class="col-sm-12">
          <mat-checkbox color="primary" formControlName="is_same">Same As Above</mat-checkbox>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <table>
            <thead>
              <tr>
                <td class="text-center">Insured Person Details</td>
                <td></td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td formGroupName="insured_person">
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="progressMainSec" appClOutsideClick
                        (appOutsideClick)="outsideClickforInsuredPerson($event)">
                        <div class="searchDiv">
                          <label for="insured_person_code">Code</label>
                          <input type="search" name="insured_person_code" id="insured_person_code" class="form-control"
                            formControlName="insured_person_code"
                            placeholder="Search By Proposer Name,Proposer Code, Email, Mobile, Pan & DOB">
                          <span class="spinner-border"
                            *ngIf="__isInsuredPersonExist && __insTrax.get(['insured_person','insured_person_code']).value?.length > 1"></span>

                          <div class="processMain_2" __searchResVisibility
                            (appOutsideClick)="outsideClickforInsuredPerson($event)">
                            <div class="serachresult_client" #insuredCd>
                              <ul *ngIf="__insuredPerson.length > 0">
                                <li *ngFor="let items of __insuredPerson" (click)="getItems(items,'I')">
                                  {{items.client_code}} | {{items.pan}} | {{items.client_name}}
                                </li>
                              </ul>
                              <div class="noDataFound" *ngIf="__insuredPerson.length == 0">
                                <h5 class="text-center">
                                  Sorry!! No Records Found
                                </h5>
                                <p>To create a new Insured Person .Please click on Create Insured Person</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-12 my-5">
                      <label>Name <span class="text-danger">*</span></label>
                      <input type="text" class="form-control" #proposer_name name="ins_person_name" id="ins_person_name"
                        formControlName="insured_person_name" placeholder="Insured Person Name">
                      <div class="invalid-feedback"
                        *ngIf=" __insTrax.get(['insured_person','insured_person_name']).invalid && ( __insTrax.get(['insured_person','insured_person_name']).dirty ||  __insTrax.get(['insured_person','insured_person_name']).touched)">
                        <span class="invalid-feedback"
                          *ngIf="( __insTrax.get(['insured_person','insured_person_name'])).errors?.required">*Please
                          provide name
                        </span>
                      </div>
                    </div>
                    <div class="col-sm-12">
                      <label>PAN</label>
                      <input type="text" class="form-control" minlength="10" maxlength="10" name="ins_person_pan"
                        id="ins_person_pan" formControlName="insured_person_pan" style="text-decoration: uppercase;"
                        placeholder="XXXXX1234X">
                      <div class="invalid-feedback"
                        *ngIf=" __insTrax.get(['insured_person','insured_person_pan']).invalid && ( __insTrax.get(['insured_person','insured_person_pan']).dirty ||  __insTrax.get(['insured_person','insured_person_pan']).touched)">
                        <span class="invalid-feedback"
                          *ngIf="( __insTrax.get(['insured_person','insured_person_pan'])).errors?.pattern">*Please
                          provide valid pan
                          Number</span>
                        <span class="invalid-feedback"
                          *ngIf="( __insTrax.get(['insured_person','insured_person_pan'])).hasError('minlength')">*pan
                          number must be 10 characters long</span>
                        <span class="invalid-feedback"
                          *ngIf="( __insTrax.get(['insured_person','insured_person_pan'])).hasError('maxlength')">*pan
                          number must be 10 characters long</span>
                      </div>
                    </div>
                    <div class="col-sm-12 my-5">
                      <label>DOB <span class="text-danger">*</span></label>
                      <input type="date" class="form-control" name="ins_person_dob" id="ins_person_dob"
                        formControlName="insured_person_dob" placeholder="Insured Person DOB">
                      <div class="invalid-feedback"
                        *ngIf=" __insTrax.get(['insured_person','insured_person_dob']).invalid && ( __insTrax.get(['insured_person','insured_person_dob']).dirty ||  __insTrax.get(['insured_person','insured_person_dob']).touched)">
                        <span class="invalid-feedback"
                          *ngIf="( __insTrax.get(['insured_person','insured_person_dob'])).errors?.required">*Please
                          provide dob
                        </span>
                      </div>
                    </div>
                  </div>
                </td>
                <td class="text-center">
                  <button color="primary" type="button" mat-button [matMenuTriggerFor]="menu">
                    <mat-icon>add</mat-icon> Create Insured Person
                  </button>
                  <mat-menu #menu="matMenu">
                    <div class="row p-0 m-0">
                      <div title="{{clOption.name}}" class="col-sm-4 d-flex justify-content-center headerMenu"
                        *ngFor="let clOption of __mcOptionMenu" (click)="createClient(clOption,'I')">
                        <mat-icon>{{clOption.icon}}</mat-icon>
                      </div>
                    </div>
                  </mat-menu>
                  <button color="primary" mat-button class="ml-3" type="button" (click)="existingClient()">
                    <mat-icon>add</mat-icon>&nbsp; Existing
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row my-5">
        <div class="col-sm-12">
          <label class="form-label" for="company_id">Company Name <span class="text-danger">*</span></label>
          <select class="form-control" id="company_name" name="company_name" formControlName="company_id">
            <option value="">Select</option>
            <option *ngFor="let cmpMst of __cmpMst" [value]="cmpMst.id">{{cmpMst.comp_short_name}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('company_id').invalid && (__insTrax.get('company_id').dirty || __insTrax.get('company_id').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('company_id')).errors?.required">*Please provide
              company name
            </span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label class="form-label" for="product_type_id">Product Type <span class="text-danger">*</span></label>
          <select class="form-control" id="product_type_id" name="product_type_id" formControlName="product_type_id">
            <option value="">Select</option>
            <option *ngFor="let prdType of __prdTypeMst" [value]="prdType.id">{{prdType.product_type}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('product_type_id').invalid && (__insTrax.get('product_type_id').dirty || __insTrax.get('product_type_id').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('product_type_id')).errors?.required">*Please provide
              product type
            </span>
          </div>
        </div>
      </div>

      <div class="row my-5">
        <div class="col-sm-12">
          <label class="form-label" for="product_id">Product Name <span class="text-danger">*</span></label>
          <select class="form-control" id="product_id" name="product_id" formControlName="product_id">
            <option value="">Select</option>
            <option *ngFor="let prd of __prdMst" [value]="prd.id">{{prd.product_name}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('product_id').invalid && (__insTrax.get('product_id').dirty || __insTrax.get('product_id').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('product_id')).errors?.required">*Please provide
              product name
            </span>
          </div>
        </div>
      </div>
      <ng-container *ngIf="this.__insTrax.get('insure_bu_type').value == 'F'">
        <div class="row my-5">
          <div class="col-sm-12">
            <label for="proposal_no">Proposal Number</label>
            <input type="text" placeholder="Enter Proposal Number" name="proposal_no" id="proposal_no"
              class="form-control" formControlName="proposal_no" />
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="this.__insTrax.get('insure_bu_type').value == 'R'">
        <div class="row my-5">
          <div class="col-sm-12">
            <label for="policy_no">Policy Number <span class="text-danger">*</span></label>
            <input type="text" placeholder="Enter Policy Number" name="policy_no" id="policy_no" class="form-control"
              formControlName="policy_no" />
            <div class="invalid-feedback"
              *ngIf="__insTrax.get('policy_no').invalid && (__insTrax.get('policy_no').dirty || __insTrax.get('policy_no').touched)">
              <span class="invalid-feedback" *ngIf="(__insTrax.get('policy_no')).errors?.required">*Please provide
                policy number
              </span>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="__insTrax.get('ins_type_id').value == '2'">
        <div class="row my-5">
          <div class="col-sm-12">
            <label for="sum_assured">Sum Assured <span class="text-danger">*</span></label>
            <input type="text" placeholder="Enter Sum Assured" name="sum_assured" id="sum_assured" class="form-control"
              formControlName="sum_assured" />
            <div class="invalid-feedback"
              *ngIf="__insTrax.get('sum_assured').invalid && (__insTrax.get('sum_assured').dirty || __insTrax.get('sum_assured').touched)">
              <span class="invalid-feedback" *ngIf="(__insTrax.get('sum_assured')).errors?.required">*Please provide sum
                assured
              </span>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="__insTrax.get('ins_type_id').value == '1' || __insTrax.get('ins_type_id').value == '3'">
        <div class="row my-5">
          <div class="col-sm-12">
            <label for="sum_insured">Sum Insured <span class="text-danger">*</span></label>
            <input type="text" placeholder="Enter Sum Assured" name="sum_insured" id="sum_insured" class="form-control"
              formControlName="sum_insured" />
            <div class="invalid-feedback"
              *ngIf="__insTrax.get('sum_insured').invalid && (__insTrax.get('sum_insured').dirty || __insTrax.get('sum_insured').touched)">
              <span class="invalid-feedback" *ngIf="(__insTrax.get('sum_insured')).errors?.required">*Please provide sum
                insured
              </span>
            </div>
          </div>
        </div>
      </ng-container>
      <div class="row">
        <div class="col-sm-12">
          <label>Mode Of Premium <span class="text-danger">*</span></label>
          <select class="form-control" formControlName="mode_of_premium">
            <option value="">Select</option>
            <option *ngFor="let premium of __modeOfPremium" [value]="premium.id">{{premium.name}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('mode_of_premium').invalid && (__insTrax.get('mode_of_premium').dirty || __insTrax.get('mode_of_premium').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('mode_of_premium')).errors?.required">*Please provide
              mode of premium
            </span>
          </div>
        </div>
      </div>

      <ng-container *ngIf="__insTrax.get('ins_type_id').value == '1'">
        <div class="row my-5">
          <div class="col-sm-12">
            <label for="premium_paying_date">Premium Paying Date <span class="text-danger">*</span></label>
            <input type="date" name="premium_paying_date" id="premium_paying_date" class="form-control"
              formControlName="premium_paying_date">
            <div class="invalid-feedback"
              *ngIf="__insTrax.get('premium_paying_date').invalid && (__insTrax.get('premium_paying_date').dirty || __insTrax.get('premium_paying_date').touched)">
              <span class="invalid-feedback" *ngIf="(__insTrax.get('premium_paying_date')).errors?.required">*Please
                provide premium paying date
              </span>
            </div>
          </div>
        </div>
      </ng-container>

      <div class="row my-5">
        <div class="col-sm-12">
          <label>Gross Premium <span class="text-danger">*</span></label>
          <input type="text" name="gross_premium" id="gross_premium" class="form-control"
            placeholder="Enter Gross Premium" (keyup)="isNumber($event)" formControlName="gross_premium">
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('gross_premium').invalid && (__insTrax.get('gross_premium').dirty || __insTrax.get('gross_premium').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('gross_premium')).errors?.required">*Please provide
              gross premium
            </span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label>Net Premium <span class="text-danger">*</span></label>
          <input type="text" [attr.disabled]="true" name="net_premium" id="net_premium" placeholder="Net Premium"
            class="form-control" formControlName="net_premium">
        </div>
      </div>

       <ng-container *ngIf="__insTrax.get('ins_type_id').value == '1' && __insTrax.get('product_type_id').value == '3'">
        <div class="row my-5">
          <div class="col-sm-12">
            <label>Third Party Premium <span class="text-danger">*</span></label>
            <input type="text" name="third_party_premium" id="third_party_premium" placeholder="Third Party Premium"
              class="form-control" formControlName="third_party_premium">
              <div class="invalid-feedback"
            *ngIf="__insTrax.get('third_party_premium').invalid && (__insTrax.get('third_party_premium').dirty || __insTrax.get('third_party_premium').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('third_party_premium')).errors?.required">*Please provide
             third party premium
            </span>
          </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12">
            <label>OD Premium <span class="text-danger">*</span></label>
            <input type="text" name="od_premium" id="od_premium" placeholder="OD Premium"
              class="form-control" formControlName="od_premium">
              <div class="invalid-feedback"
            *ngIf="__insTrax.get('od_premium').invalid && (__insTrax.get('od_premium').dirty || __insTrax.get('od_premium').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('od_premium')).errors?.required">*Please provide
             od premium
            </span>
          </div>
          </div>
        </div>
       </ng-container>

      <div class="row my-5">
        <div class="col-sm-12">
          <label for="mode_of_payment">Mode Of Payment <span class="text-danger">*</span></label>
          <select class="form-control" formControlName="mode_of_payment">
            <option value="">Select</option>
            <option value="O">Offline</option>
            <option value="N">Online</option>
            <option value="C">Cash</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('mode_of_payment').invalid && (__insTrax.get('mode_of_payment').dirty || __insTrax.get('mode_of_payment').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('mode_of_payment')).errors?.required">*Please provide
              mode of payment</span>
          </div>
        </div>
      </div>
      <ng-container
        *ngIf="__insTrax.get('mode_of_payment').value == 'O' || __insTrax.get('mode_of_payment').value == 'N'">
        <div class="row">
          <div [ngClass]="{'col-sm-12':!__dialogDtForBnk,'col-sm-8': __dialogDtForBnk}">
            <div class="progressMainSec" appClOutsideClick (appOutsideClick)="outsideClickforbank($event)">
              <div class="searchDiv">
                <label for="__clntCd">MICR Code
                  <span class="text-danger" *ngIf="__insTrax.get('mode_of_payment').value == 'O'">*</span>
                </label>
                <input type="search " name="__clntCd" id="__clntCd" class="form-control"
                formControlName="micr_code"
                  placeholder="Search By Ifs Code , Branch Name">
                <span class="spinner-border"
                  *ngIf="__isBankPending && __insTrax.get('micr_code').value?.length > 1"></span>
                <div class="processMain_2" __searchResVisibility (appOutsideClick)="outsideClickforbank($event)">
                  <div class="serachresult_client" #searchbnk>
                    <ul *ngIf="__bnkMst.length > 0">
                      <li *ngFor="let items of __bnkMst" (click)="getItems(items,'B')">
                        {{items.bank_name}} | {{items.ifs_code}} | {{items.branch_name}}
                      </li>
                    </ul>
                    <div class="noDataFound" *ngIf="__bnkMst.length == 0">
                      <h5 class="text-center">
                        Sorry!! No Records Found
                      </h5>
                      <p>Banks are not available</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-4 clientCode" *ngIf="__dialogDtForBnk && __insTrax.get('micr_code').value">
            <button (click)="openDialog('B')" color="primary" mat-button type="button"
              aria-label="Example icon button with a eye icon" title="View Bank Details">
              <mat-icon>remove_red_eye</mat-icon>
              View Details
            </button>
          </div>
        </div>

        <div class="row mt-5" *ngIf="__insTrax.get('micr_code').value && this.__dialogDtForBnk">
          <div class="col-sm-12">
            <label for="bnk_name">Bank</label>
            <input type="text" name="bnk_name" id="bnk_name" formControlName="bank_name" class="form-control"
              [attr.disabled]="true" />
          </div>
        </div>
        <div class="row my-5">
          <div class="col-sm-12">
            <label for="acc_no">
              Account Number
              <span class="text-danger" *ngIf="__insTrax.get('mode_of_payment').value == 'O'">*</span></label>
            <input type="text"
            placeholder="Enter Account Number"
            name="acc_no"
            id="acc_no"
            class="form-control"
            formControlName="acc_no">
              <div class="invalid-feedback"
              *ngIf="__insTrax.get('acc_no').invalid && (__insTrax.get('acc_no').dirty || __insTrax.get('acc_no').touched)">
              <span class="invalid-feedback" *ngIf="(__insTrax.get('acc_no')).errors?.required">*Please provide
              account number
              </span>
              </div>
          </div>
        </div>
        <ng-container *ngIf="__insTrax.get('mode_of_payment').value == 'N'">
          <div class="row">
            <div class="col-sm-12">
              <label for="payment_ref_no">Payment Reference Number <span class="text-danger">*</span></label>
              <input placeholder="Enter Payment Reference Number" type="text" name="payment_ref_no" id="payment_ref_no"
                class="form-control" formControlName="payment_ref_no">
                <div class="invalid-feedback"
                *ngIf="__insTrax.get('payment_ref_no').invalid && (__insTrax.get('payment_ref_no').dirty || __insTrax.get('payment_ref_no').touched)">
                <span class="invalid-feedback" *ngIf="(__insTrax.get('payment_ref_no')).errors?.required">*Please provide
                payment reference number
                </span>
                </div>
          </div>
          </div>
        </ng-container>
        <ng-container *ngIf="__insTrax.get('mode_of_payment').value == 'O'">
          <div class="row">
            <div class="col-sm-12">
              <label for="chq_no">Cheque Number <span class="text-danger">*</span></label>
              <input maxlength="6" minlength="6" (keypress)="preventNonumeric($event)" placeholder="Enter Cheque Number"
                type="text" name="chq_no" id="chq_no" class="form-control" formControlName="chq_no">
              <div class="invalid-feedback"
                *ngIf="__insTrax.get('chq_no').invalid && (__insTrax.get('chq_no').dirty || __insTrax.get('chq_no').touched)">
                <span class="invalid-feedback" *ngIf="(__insTrax.get('chq_no')).errors?.required">*Please provide cheque
                  number</span>
                <span class="invalid-feedback" *ngIf="(__insTrax.get('chq_no')).hasError('minlength')">*cheque number
                  must be 6 digits</span>
                <span class="invalid-feedback" *ngIf="(__insTrax.get('chq_no')).hasError('maxlength')">*cheque number
                  must be 6 digits</span>
                <span class="invalid-feedback" *ngIf="(__insTrax.get('chq_no')).hasError('pattern')">*allow only
                  digits</span>

              </div>
            </div>
          </div>
        </ng-container>

      </ng-container>

      <div class="row my-5">
        <div class="col-sm-12">
          <label for="policy_term">Policy Term <span class="text-danger">*</span></label>
          <input type="text" placeholder="Enter Policy Term" name="policy_term" id="policy_term" class="form-control"
            formControlName="policy_term">
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('policy_term').invalid && (__insTrax.get('policy_term').dirty || __insTrax.get('policy_term').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('policy_term')).errors?.required">*Please provide
              policy term</span>
          </div>

        </div>
      </div>
      <div class="row ">
        <div class="col-sm-12">
          <label for="policy_pre_pay_term">Premium Paying Term <span class="text-danger">*</span></label>
          <input type="text" placeholder="Enter Policy Premium Paying Term" name="policy_pre_pay_term"
            id="policy_pre_pay_term" class="form-control" formControlName="policy_pre_pay_term">
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('policy_pre_pay_term').invalid && (__insTrax.get('policy_pre_pay_term').dirty || __insTrax.get('policy_pre_pay_term').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('policy_pre_pay_term')).errors?.required">*Please
              provide premium paying term</span>
          </div>
        </div>
      </div>
      <div class="row my-5">
        <div class="col-sm-12">
          <label>Upload Scan Application Form <span class="text-danger">*</span></label>
          <input type="file" name="file" id="file" formControlName="file" class="form-control"
            (change)="getFIle($event.target)" accept=".pdf">
           <mat-hint class="mt-2"><p class="m-0">Allowed format: PDF (size upto: 2MB)</p></mat-hint>
          <div class="invalid-feedback"
            *ngIf=" __insTrax.get('file').invalid && ( __insTrax.get('file').dirty ||  __insTrax.get('file').touched)">
            <span class="invalid-feedback" *ngIf=" __insTrax.get('file').errors?.required">*Please
              provide file</span>
            <span class="invalid-feedback" *ngIf="__insTrax.get('file').errors?.inValidExt">*Invalid
              file extension.</span>
            <span class="invalid-feedback" *ngIf="__insTrax.get('file').errors?.fileSizeValidator">*File size
              must
              not exceed than
              2MB.</span>
          </div>
          <!-- <ng-container *ngIf="this.__insTrax.get('filePreview').value">
            <br clear="all" />
            <img class="imgThumbnail" [src]="this.__insTrax.get('filePreview').value" alt="Application form Image">
          </ng-container> -->
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label>Form Login At <span class="text-danger">*</span></label>
          <select class="form-control" formControlName="comp_login_at">
            <option value="">Select</option>
            <option *ngFor="let cmpMst of __frmLoginAtMst" [value]="cmpMst.id">{{cmpMst.comp_short_name}}</option>
          </select>
          <div class="invalid-feedback"
            *ngIf="__insTrax.get('comp_login_at').invalid && (__insTrax.get('comp_login_at').dirty || __insTrax.get('comp_login_at').touched)">
            <span class="invalid-feedback" *ngIf="(__insTrax.get('comp_login_at')).errors?.required">*Please provide
              form login at</span>
          </div>
        </div>
      </div>
      <div class="row my-5">
        <div class="col-sm-12">
          <label>Remarks</label>
          <textarea placeholder="Enter Remarks" class="form-control" formControlName="remarks" row="5"
            cols="12"></textarea>
        </div>
      </div>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end" class="popupBoxSubmitSec">
    <button class="btn addBtn" [attr.form]="'__TRAX_INS' + data.tin_no"
      [disabled]="this.__insTrax.invalid">Submit</button>
  </mat-dialog-actions>
  <br clear="all">
</div>
