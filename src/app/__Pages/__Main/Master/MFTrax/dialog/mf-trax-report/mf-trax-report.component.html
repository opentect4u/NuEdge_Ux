<!-- cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle -->

<div cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
  <div mat-dialog-title class="dialog-title">
    <h2>MF Trax Reports</h2>
    <div class="btnIcon">
      <button mat-icon-button title="Minimize" (click)="minimize()">
        <mat-icon>remove</mat-icon>
      </button>
      <button mat-icon-button title="Restore-down" (click)="maximize()" *ngIf="__isVisible">
        <mat-icon>content_copy</mat-icon>
      </button>
      <button mat-icon-button title="Maximize" (click)="fullScreen()" *ngIf="!__isVisible">
        <mat-icon>check_box_outline_blank </mat-icon>
      </button>

      <button mat-icon-button title="Close" [mat-dialog-close]="">
        <mat-icon>close</mat-icon>
      </button>
    </div>

  </div>
  <mat-dialog-content  class="p-5 d-flex justify-content-center align-item-center">
    <p-card>
    <ng-template pTemplate="header">
      <div class="d-flex
      pt-4 px-4
      align-items-center
      justify-content-between">
      <div>
        <h5>MF Trax Report</h5>
      </div>
      <span class="p-input-icon-left ml-auto w-25">
        <input pInputText class="form-control" type="text" (input)="filterGlobal($event)" placeholder="Search..." />
    </span>
    </div>
    </ng-template>

    <p-table
    #primeTbl
    id="excDt"
    [value]="__mfTrx"
    [responsive]="true"
    [rowHover]="true"
    styleClass="p-datatable-striped p-datatable-lg"
    responsiveLayout="scroll"
    [scrollable]="true"
    [columns]="__mfTraxColumn"
    [paginator]="true"
    columnResizeMode="expand"
      id="branchDt"
    scrollHeight="200px"
    [autoLayout]="true"
    [totalRecords]="__mfTrx.length"
    [pageLinks]="3"
    [rowsPerPageOptions]="[10,50,100,{ showAll: 'All' }]"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rows]="10"
    [showCurrentPageReport]="true"
    [paginatorDropdownAppendTo]="'body'"
    appendTo="body"
    [globalFilterFields]="getColumns()"
    [tableStyle]="{ 'min-width': '100rem' }"
    >
      <ng-template pTemplate="header">
          <tr >
              <th  *ngFor="let col of __mfTraxColumn"
              [pSortableColumn]="col.field !='delete' ? col.field : ''"
              [style.max-width]="col.width"
              pResizableColumn
              >
                {{ col.header }}
                <p-sortIcon *ngIf="col.field !='edit' && col.field !='delete'" [field]="col.field">
                </p-sortIcon>
              </th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-mf_trax  let-i="rowIndex">
        <tr tabindex="999">
          <td *ngFor="let col of __mfTraxColumn"
          [style.max-width]="col.width"
          >
            <ng-container [ngSwitch]="true">
              <ng-container *ngSwitchCase="col.field == 'sl_no'">
                <b>{{i + 1}}</b>
             </ng-container>
              <ng-container *ngSwitchDefault>
                <b [matTooltip]="mf_trax[col.field]">{{ mf_trax[col.field] ? mf_trax[col.field] : 'N/A' }}</b>
              </ng-container>
              <ng-container *ngSwitchCase="col.field == 'edit'">
                <p-button icon="pi pi-pencil" (click)="populateDT(mf_trax)"
                  styleClass="p-button-rounded p-button-primary"></p-button>
              </ng-container>
              <ng-container *ngSwitchCase="col.field == 'delete'">
                <p-button icon="pi pi-trash" (click)="delete(mf_trax,i)"
                  styleClass="p-button-rounded p-button-danger"></p-button>
              </ng-container>
            </ng-container>
          </td>
          </tr>
        </ng-template>

      <ng-template pTemplate="emptymessage" let-columns>
        <tr>
          <td [attr.colSpan]="columns.length" class="noHistoryAvailable">
             <h5>No Records Found</h5>
          </td>
        </tr>
      </ng-template>
  </p-table>
</p-card>
  </mat-dialog-content>
  </div>
